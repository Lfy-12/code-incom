<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function swap(i, j, arr) {
            let temp = arr[i];
            arr[i] = arr[j];
            arr[j] = temp;
        }

        function heapSort(arr) {
            // 初始化大顶堆
            for (let i = Math.floor(arr.length / 2 - 1); i >= 0; i--) {
                buildMaxHeap(arr, i, arr.length)
            }
            console.log('arr',arr);
            // 排序，每一次for循环找出一个当前最大值，数组长度减一
            for (let i = arr.length - 1; i > 0; i--) {
                swap(0, i, arr);
                buildMaxHeap(arr, 0);
            }
            return arr;
        }
        function buildMaxHeap(arr, i) {
            let left = 2 * i + 1,
                right = 2 * i + 2,
                largest = i;
            if (left < length && arr[left] > arr[largest]) {
                largest = left;
            }
            if (right < length && arr[right] > arr[largest]) {
                largest = right;
            }
            if (largest != i) {  //即上面的if中有一个生效了
                swap(arr, i, largest);  //交换最大的为父节点
                buildMaxHeap(arr, largest);  //交换后，原值arr[i]（往下降了）（索引保存为largest），
                //作为根时，子节点可能比它大，因此要继续调整
            }
            return arr
        }
        console.log('res11', heapSort([2, 56, 4, 33, 88, 20, 11, 45]));
    </script>
</body>

</html>